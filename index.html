<!DOCTYPE html>
<html lang="en">
<head>
    <title>React Functional Components</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="node_modules/@shower/material/styles/styles.css">
    <link rel="stylesheet" href="node_modules/highlight.js/styles/stackoverflow-light.css" />
    <style>
        .shower {
            --slide-ratio: calc(16 / 9);
        }
        code {
	        font-size: 10px;
        }
    </style>
</head>
<body class="shower list">

    <header class="caption">
        <h1>Функциональные компоненты в React</h1>
        <p>особенности и различия с классовыми</p>
    </header>

    <section class="slide">
        <figure>
            <img class="cover" src="images/cover.png" alt="Picture placeholder.">
        </figure>
    </section>

    <section class="slide">
        <h2>Проблемы</h2>
        <ul>
            <li class="next">Желание уместить большую логику в компонент</li>
            <li class="next">Со временем компоненты становятся трудными для понимания</li>
            <li class="next">Тяжело переиспользовать логику</li>
            <li class="next">THIS</li>
        </ul>
    </section>

    <section class="slide">
        <h2>Мотивация</h2>
        <ol>
            <li class="next">Меньше кода</li>
            <li class="next">Легче шарить логику (кастомные хуки)</li>
            <li class="next">Меньше головной боли c методами ЖЦ</li>
            <li class="next">Новые библиотеки чаще выходят с использованием хуков</li>
        </ol>
    </section>

    <section class="slide">
        <h2>Паттерн Presentational-Container</h2>

        <div class="columns two">
            <pre class="next">
                <code class="language-js">
// Container
import React from "react";
import CommentList from "./CommentList";

class CommentListContainer extends React.Component {
  state = { comments: [] }

  componentDidMount() {
    fetch("/my-comments.json")
      .then(res => res.json())
      .then(comments => this.setState({ comments }))
  }

  render() {
    return &lt;CommentList comments={this.state.comments} />;
  }
}
                </code>
            </pre>
            <pre class="next">
                <code class="language-js">
// View
import React from "react";

const Commentlist = comments => (
  &lt;ul&gt;
    {comments.map(({ body, author }) =>
      &lt;li&gt;{body}-{author}&lt;/li&gt;
    )}
  &lt;/ul&gt;
)
                </code>
            </pre>
        </div>
    </section>

    <section class="slide">
        <div>Теперь</div>
        <pre>
            <code class="language-js">
const AvailableСount = ({count, theme, alreadyRegistered}) =&gt; {
    <mark>const [toggle, setToggle] = useState(false);</mark>
    <mark>const translation = useContext(Translation);</mark>
    const handleClick = () =&gt; setToggle(!toggle);
    return (
        &lt;Container toggle={toggle}&gt;
            &lt;Close onClick={handleClick}&gt;
                &lt;img src={theme.icons.close} alt=&quot;&quot;/&gt;
            &lt;/Close&gt;
            &lt;Title&gt;
                {translation.available} &lt;Count&gt;{count}&lt;/Count&gt;
            &lt;/Title&gt;
            {!alreadyRegistered &amp;&amp;
                &lt;Text&gt;{translation.recognizeMore} &lt;a href=&quot;/register/&quot;&gt;Sign Up&lt;/a&gt;&lt;/Text&gt;
            }
        &lt;/Container&gt;
    )
};
            </code>
        </pre>
    </section>

    <section class="slide">
        <h3 style="text-align: center">Функциональные компоненты фиксируют значения, необходимые для рендера</h3>
        <small><em>sandbox</em></small>
    </section>

    <section class="slide">
        <h2>Сравнение сборок</h2>
<!--        -->
    </section>

    <section class="slide">
        <h2>Правила хуков</h2>
        <ol>
            <li class="next">
                Использовать только на верхнем уровне
                <div>
                    <small><em>Не использовать внутри циклов, условных операторов или вложенных функций.</em></small>
                </div>
            </li>

            <li class="next">
                Вызывайте хуки только из React-функций
                <div>
                    <small><em>Из функционального компонента React.</em></small>
                </div>
                <div>
                    <small><em>Из пользовательского хука</em></small>
                </div>
            </li>
        </ol>
    </section>

    <section class="slide">
        <h2>Нативные хуки</h2>
        <div class="columns two">
            <ul>
                <li class="next">useState</li>
                <li class="next">useEffect</li>
                <li class="next">useContext</li>
                <li class="next">useRef</li>
                <li class="next">useLayoutEffect</li>
            </ul>
            <ul class="next">
                <li>useReducer</li>
                <li>useCallback</li>
                <li>useMemo</li>
                <li>useImperativeHandle</li>
                <li>useDebugValue</li>
            </ul>
        </div>
    </section>

    <section class="slide">
        <h2>useState</h2>
        <h3>Хук состояния</h3>
        <pre>
                <code>
const Example: FC = () => {
    // Объявление новой переменной состояния «count»
    <mark>const [count, setCount] = useState&lt;number>(0)</mark>

    return (
        &lt;div>
            &lt;p>Вы кликнули {count} раз(а)&lt;/p>
            &lt;button onClick={() => setCount(count + 1)}>
                Нажми на меня
            &lt;/button>
        &lt;/div>
    );
}
                </code>
            </pre>
    </section>

    <section class="slide">
        <h2>useEffect</h2>
        <h3>Хук эффекта</h3>
        <pre>
            <code>

            </code>
        </pre>
    </section>

    <div class="progress"></div>
    <script src="node_modules/@shower/core/dist/shower.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.4.1/highlight.min.js"></script>
    <script>
        hljs.initHighlightingOnLoad();
    </script>
</body>
</html>
